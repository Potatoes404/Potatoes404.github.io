<!DOCTYPE html>
<html>
<head>
<title>เกมกระโดดหนีสิ่งกีดขวาง</title>
<style>
  body {
    background-color: #f0f0f0;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    flex-direction: column;
    margin: 0;
  }
  .game-container {
    width: 600px;
    height: 200px;
    border: 2px solid #333;
    background-color: #fff;
    position: relative;
    overflow: hidden;
  }
  #player {
    width: 30px;
    height: 30px;
    background-color: green;
    position: absolute;
    bottom: 0;
    left: 50px;
  }
  .obstacle {
    width: 20px;
    height: 20px;
    background-color: red;
    position: absolute;
    bottom: 0;
    animation: obstacle-move 3s linear infinite;
  }
  @keyframes obstacle-move {
    0% {
      right: -20px;
    }
    100% {
      right: 100%;
    }
  }
</style>
</head>
<body>

<h1>เกมกระโดดหนีสิ่งกีดขวาง</h1>
<div class="game-container">
  <div id="player"></div>
  <div id="obstacle"></div>
</div>
<p>แตะหน้าจอ หรือกดปุ่มใดๆ เพื่อกระโดด</p>
<p id="score">คะแนน: 0</p>

<script>
  const player = document.getElementById('player');
  const obstacle = document.getElementById('obstacle');
  const scoreDisplay = document.getElementById('score');
  
  let score = 0;
  let isJumping = false;
  let gameInterval;
  let scoreInterval;

  // Jump function
  function jump() {
    if (isJumping) return;
    isJumping = true;

    let jumpHeight = 0;
    const jumpUpInterval = setInterval(() => {
      if (jumpHeight >= 100) {
        clearInterval(jumpUpInterval);
        const jumpDownInterval = setInterval(() => {
          if (jumpHeight <= 0) {
            clearInterval(jumpDownInterval);
            isJumping = false;
            player.style.bottom = '0px';
          }
          jumpHeight -= 5;
          player.style.bottom = jumpHeight + 'px';
        }, 20);
      }
      jumpHeight += 5;
      player.style.bottom = jumpHeight + 'px';
    }, 20);
  }

  // Detect collision
  function detectCollision() {
    const playerRect = player.getBoundingClientRect();
    const obstacleRect = obstacle.getBoundingClientRect();

    if (playerRect.right > obstacleRect.left &&
        playerRect.left < obstacleRect.right &&
        playerRect.bottom > obstacleRect.top) {
      clearInterval(gameInterval);
      clearInterval(scoreInterval);
      alert('เกมโอเวอร์! คะแนนของคุณคือ: ' + score);
      location.reload(); // Reload the page to restart
    }
  }

  // Update score
  function updateScore() {
    score++;
    scoreDisplay.innerText = 'คะแนน: ' + score;
  }

  // Event listeners
  document.addEventListener('keydown', jump);
  document.addEventListener('touchstart', jump);

  // Game loop
  function startGame() {
    gameInterval = setInterval(detectCollision, 10);
    scoreInterval = setInterval(updateScore, 100);
  }

  startGame();
</script>

</body>
</html>
